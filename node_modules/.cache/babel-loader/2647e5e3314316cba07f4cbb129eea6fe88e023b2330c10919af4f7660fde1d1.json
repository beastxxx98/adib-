{"ast":null,"code":"import{useState}from'react';import'./genre.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GenrePredict(){const[audioFile,setAudioFile]=useState(null);const[audioURL,setAudioURL]=useState(null);const[result,setResult]=useState('');const[loading,setLoading]=useState(false);const handleFileChange=e=>{const file=e.target.files[0];if(!file)return;setAudioFile(file);setAudioURL(URL.createObjectURL(file));setResult('');};const handlePredict=async()=>{if(!audioFile)return setResult('Please upload an audio file first.');setLoading(true);setResult('');try{const formData=new FormData();formData.append('file',audioFile);const res=await fetch('http://127.0.0.1:5001/predict',{method:'POST',body:formData});const data=await res.json();if(!res.ok)throw new Error(data.error||'Server error');// âœ… Updated: show both genre & subgenre\nconst genreText=\"\\uD83C\\uDFB5 Predicted Genre: \".concat(data.genre);setResult(\"\".concat(genreText));}catch(err){console.error('Prediction Error:',err);setResult(\"Error predicting genre: \".concat(err.message));}setLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"genre-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"genre-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDFA7 Music Genre Prediction\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Upload your audio file:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"audio/*\",onChange:handleFileChange}),audioURL&&/*#__PURE__*/_jsxs(\"audio\",{controls:true,style:{marginTop:'10px',width:'100%'},children:[/*#__PURE__*/_jsx(\"source\",{src:audioURL,type:audioFile===null||audioFile===void 0?void 0:audioFile.type}),\"Your browser does not support the audio element.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePredict,disabled:loading||!audioFile,style:{marginTop:'10px'},children:loading?'Predicting...':'Predict Genre '}),result&&/*#__PURE__*/_jsx(\"div\",{className:\"result-box\",style:{marginTop:'10px',whiteSpace:'pre-line'// ðŸ‘ˆ keeps line breaks\n},children:result})]})});}","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","GenrePredict","audioFile","setAudioFile","audioURL","setAudioURL","result","setResult","loading","setLoading","handleFileChange","e","file","target","files","URL","createObjectURL","handlePredict","formData","FormData","append","res","fetch","method","body","data","json","ok","Error","error","genreText","concat","genre","err","console","message","className","children","type","accept","onChange","controls","style","marginTop","width","src","onClick","disabled","whiteSpace"],"sources":["F:/music-projects/music-genre-app/src/GenrePredict.js"],"sourcesContent":["import { useState } from 'react';\r\nimport './genre.css';\r\n\r\nexport default function GenrePredict() {\r\n  const [audioFile, setAudioFile] = useState(null);\r\n  const [audioURL, setAudioURL] = useState(null);\r\n  const [result, setResult] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    setAudioFile(file);\r\n    setAudioURL(URL.createObjectURL(file));\r\n    setResult('');\r\n  };\r\n\r\n  const handlePredict = async () => {\r\n    if (!audioFile) return setResult('Please upload an audio file first.');\r\n    setLoading(true);\r\n    setResult('');\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', audioFile);\r\n\r\n      const res = await fetch('http://127.0.0.1:5001/predict', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) throw new Error(data.error || 'Server error');\r\n\r\n      // âœ… Updated: show both genre & subgenre\r\n      const genreText = `ðŸŽµ Predicted Genre: ${data.genre}`;\r\n\r\n      setResult(`${genreText}`);\r\n    } catch (err) {\r\n      console.error('Prediction Error:', err);\r\n      setResult(`Error predicting genre: ${err.message}`);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"genre-container\">\r\n      <div className=\"genre-card\">\r\n        <h2>ðŸŽ§ Music Genre Prediction</h2>\r\n        <p className=\"subtitle\">Upload your audio file:</p>\r\n\r\n        <input\r\n          type=\"file\"\r\n          accept=\"audio/*\"\r\n          onChange={handleFileChange}\r\n        />\r\n\r\n        {/* Audio player */}\r\n        {audioURL && (\r\n          <audio controls style={{ marginTop: '10px', width: '100%' }}>\r\n            <source src={audioURL} type={audioFile?.type} />\r\n            Your browser does not support the audio element.\r\n          </audio>\r\n        )}\r\n\r\n        <button\r\n          onClick={handlePredict}\r\n          disabled={loading || !audioFile}\r\n          style={{ marginTop: '10px' }}\r\n        >\r\n          {loading ? 'Predicting...' : 'Predict Genre '}\r\n        </button>\r\n\r\n        {result && (\r\n          <div\r\n            className=\"result-box\"\r\n            style={{\r\n              marginTop: '10px',\r\n              whiteSpace: 'pre-line', // ðŸ‘ˆ keeps line breaks\r\n            }}\r\n          >\r\n            {result}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}